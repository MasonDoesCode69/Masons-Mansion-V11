<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Masonâ€™s Mansion | V8 Supernova</title>
    <style>
        :root {
            --bg: #020205;
            --accent: #00f2ff;
            --glow: rgba(0, 242, 255, 0.4);
            --glass: rgba(10, 10, 20, 0.8);
            --border: rgba(255, 255, 255, 0.12);
            --text: #ffffff;
            --font: 'Segoe UI', system-ui, sans-serif;
            --underglow: 0 0 25px var(--glow);
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }
        body, html { 
            width: 100%; height: 100%; overflow: hidden; 
            background: var(--bg); color: var(--text); 
            font-family: var(--font); cursor: crosshair;
        }

        #bg-canvas { position: fixed; inset: 0; z-index: 0; }

        /* --- LOGIN SCREEN --- */
        #auth-overlay {
            position: fixed; inset: 0; z-index: 10000;
            display: flex; align-items: center; justify-content: center;
            background: #000; backdrop-filter: blur(20px);
            transition: 1s ease;
        }
        .login-card {
            background: var(--glass); padding: 45px; border-radius: 30px;
            border: 1px solid var(--border); text-align: center;
            box-shadow: var(--underglow); width: 350px;
        }
        .login-card h1 { font-size: 1.8rem; letter-spacing: 6px; margin-bottom: 25px; color: var(--accent); }
        .login-card input {
            width: 100%; background: rgba(0,0,0,0.5); border: 1px solid var(--border);
            padding: 15px; border-radius: 12px; color: #fff; margin-bottom: 15px;
            text-align: center; outline: none;
        }
        .login-card button {
            width: 100%; padding: 15px; border-radius: 12px; border: none;
            background: var(--accent); color: #000; font-weight: 900;
            cursor: pointer; text-transform: uppercase;
        }

        /* --- DESKTOP --- */
        #desktop { position: relative; width: 100vw; height: 100vh; z-index: 10; display: none; }

        .window {
            position: absolute; background: var(--glass);
            border: 1px solid var(--border); border-radius: 20px;
            backdrop-filter: blur(25px); display: flex; flex-direction: column;
            box-shadow: 0 10px 40px rgba(0,0,0,0.5); overflow: hidden;
        }
        .win-header {
            padding: 12px 20px; background: rgba(255,255,255,0.03);
            display: flex; justify-content: space-between; align-items: center;
            cursor: move; border-bottom: 1px solid var(--border);
        }
        .win-title { font-size: 10px; font-weight: 900; color: var(--accent); text-transform: uppercase; }
        .win-close { width: 30px; height: 30px; display:flex; align-items:center; justify-content:center; cursor: pointer; color: #ff5f56; }

        .vip-mode { border: 2px solid transparent !important; animation: borderRGB 4s infinite linear; }
        @keyframes borderRGB {
            0% { border-color: #ff0000; box-shadow: 0 0 20px #ff000066; }
            33% { border-color: #00ff00; box-shadow: 0 0 20px #00ff0066; }
            66% { border-color: #0000ff; box-shadow: 0 0 20px #0000ff66; }
            100% { border-color: #ff0000; box-shadow: 0 0 20px #ff000066; }
        }

        #taskbar {
            position: fixed; bottom: 25px; left: 50%; transform: translateX(-50%);
            background: rgba(10, 10, 15, 0.9); border: 1px solid var(--border);
            padding: 12px 25px; border-radius: 20px; display: flex; gap: 20px;
            backdrop-filter: blur(15px); z-index: 1000;
        }
        .t-icon {
            width: 48px; height: 48px; display: flex; align-items: center; justify-content: center;
            background: rgba(255,255,255,0.05); border-radius: 12px; cursor: pointer;
            font-size: 22px; transition: 0.3s;
        }
        .t-icon:hover { transform: translateY(-10px); background: var(--accent); color: #000; }

        .hidden { display: none !important; }
    </style>
</head>
<body>

    <canvas id="bg-canvas"></canvas>

    <div id="auth-overlay">
        <div class="login-card">
            <h1>MASON V8</h1>
            <input type="password" id="sys-pass" placeholder="KEY CODE">
            <button onclick="Mansion.init()">Auth</button>
        </div>
    </div>

    <div id="desktop">
        <div id="win-layer"></div>
        <div id="taskbar">
            <div class="t-icon" onclick="Mansion.spawn('games')">ðŸŽ®</div>
            <div class="t-icon" onclick="Mansion.spawn('themes')">ðŸŽ¨</div>
            <div id="owner-icon" class="t-icon hidden" onclick="Mansion.spawn('owner')">ðŸ‘‘</div>
        </div>
    </div>

    <script>
        const Mansion = {
            rank: 'guest',
            zIndex: 100,
            orbs: [],
            isMouseDown: false,

            init() {
                const p = document.getElementById('sys-pass').value;
                if(p === "masononly69") { this.rank = "OWNER"; document.getElementById('owner-icon').classList.remove('hidden'); this.boot(); }
                else if(p === "VIP67") { this.rank = "VIP"; this.boot(); }
                else { alert("WRONG KEY"); }
            },

            boot() {
                document.getElementById('auth-overlay').style.opacity = "0";
                setTimeout(() => {
                    document.getElementById('auth-overlay').style.display = "none";
                    document.getElementById('desktop').style.display = "block";
                }, 1000);
                this.initEngine();
            },

            spawn(type) {
                const id = 'w-' + Math.random().toString(36).substr(2, 5);
                const win = document.createElement('div');
                win.className = 'window' + (this.rank !== 'guest' ? ' vip-mode' : '');
                win.id = id; win.style.width = "400px"; win.style.height = "300px";
                win.style.left = "30%"; win.style.top = "20%";
                win.style.zIndex = ++this.zIndex;
                win.innerHTML = `<div class="win-header" onmousedown="Mansion.drag(event, '${id}')">
                    <div class="win-title">${type}</div>
                    <div class="win-close" onclick="document.getElementById('${id}').remove()">Ã—</div>
                </div><div style="padding:20px;">System Active. Rank: ${this.rank}</div>`;
                document.getElementById('win-layer').appendChild(win);
            },

            drag(e, id) {
                const el = document.getElementById(id); el.style.zIndex = ++this.zIndex;
                let ox = e.clientX - el.offsetLeft, oy = e.clientY - el.offsetTop;
                const mm = (e) => { el.style.left = (e.clientX-ox)+"px"; el.style.top = (e.clientY-oy)+"px"; };
                const mu = () => { window.removeEventListener('mousemove', mm); window.removeEventListener('mouseup', mu); };
                window.addEventListener('mousemove', mm); window.addEventListener('mouseup', mu);
            },

            addOrb() {
                const c = document.getElementById('bg-canvas');
                this.orbs.push({
                    x: Math.random() * c.width,
                    y: Math.random() * c.height,
                    r: Math.random() * 50 + 20,
                    vx: (Math.random() - 0.5) * 2,
                    vy: (Math.random() - 0.5) * 2,
                    pulse: Math.random() * Math.PI // For the throbbing effect
                });
            },

            initEngine() {
                const c = document.getElementById('bg-canvas');
                const ctx = c.getContext('2d');
                let mouse = { x: -1000, y: -1000 };

                window.addEventListener('mousemove', e => { mouse.x = e.clientX; mouse.y = e.clientY; });
                window.addEventListener('mousedown', () => this.isMouseDown = true);
                window.addEventListener('mouseup', () => this.isMouseDown = false);
                
                // --- 'H' KEY TO SPAWN MORE ---
                window.addEventListener('keydown', e => {
                    if(e.key.toLowerCase() === 'h') {
                        for(let i=0; i<10; i++) this.addOrb();
                    }
                });

                const resize = () => { c.width = window.innerWidth; c.height = window.innerHeight; };
                window.onresize = resize; resize();

                for(let i=0; i<30; i++) this.addOrb();

                const draw = () => {
                    ctx.fillStyle = getComputedStyle(document.documentElement).getPropertyValue('--bg');
                    ctx.fillRect(0,0,c.width,c.height);

                    this.orbs.forEach(o => {
                        let dx = o.x - mouse.x;
                        let dy = o.y - mouse.y;
                        let dist = Math.sqrt(dx*dx + dy*dy);
                        let limit = 100; // Smaller barrier for tighter control

                        if(dist < limit) {
                            let force = (limit - dist) / limit;
                            let nx = dx / dist; let ny = dy / dist;
                            let mode = this.isMouseDown ? -2 : 3; // Gravity vs Hop
                            o.vx += nx * force * mode;
                            o.vy += ny * force * mode;
                        }

                        // Passive Float (Keeps them moving)
                        o.vx += (Math.random() - 0.5) * 0.1;
                        o.vy += (Math.random() - 0.5) * 0.1;

                        o.vx *= 0.98; o.vy *= 0.98;
                        o.x += o.vx; o.y += o.vy;

                        // Wall Bouncing
                        if(o.x<0 || o.x>c.width) o.vx *= -1.1; // Slight speed boost on bounce
                        if(o.y<0 || o.y>c.height) o.vy *= -1.1;

                        // Effect: Pulsing Glow
                        o.pulse += 0.05;
                        let sizeMod = Math.sin(o.pulse) * 5;
                        let currentR = Math.max(5, o.r + sizeMod);

                        let grad = ctx.createRadialGradient(o.x, o.y, 0, o.x, o.y, currentR);
                        grad.addColorStop(0, getComputedStyle(document.documentElement).getPropertyValue('--glow'));
                        grad.addColorStop(1, 'transparent');
                        ctx.fillStyle = grad;
                        ctx.beginPath(); ctx.arc(o.x, o.y, currentR, 0, Math.PI*2); ctx.fill();
                    });
                    requestAnimationFrame(draw);
                };
                draw();
            }
        };
    </script>
</body>
</html>
