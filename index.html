<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Mason‚Äôs Mansion | V20 Infinite Gateway</title>
    <style>
        :root {
            --gold: #ffcc33;
            --dark: #050505;
            --glass: rgba(15, 12, 5, 0.95);
            --glow: rgba(255, 204, 51, 0.5);
            --accent: #ff0055;
        }

        * { box-sizing: border-box; cursor: none !important; margin: 0; padding: 0; user-select: none; }
        body { background: var(--dark); color: #fff; font-family: 'Segoe UI', sans-serif; overflow: hidden; height: 100vh; }

        /* --- MARK THE FLOATING COMPANION --- */
        #mark-container {
            position: fixed; z-index: 100000; pointer-events: none;
            display: flex; flex-direction: column; align-items: center;
        }
        #mark-face {
            width: 40px; height: 40px; background: var(--gold);
            border-radius: 50%; display: flex; align-items: center; justify-content: center;
            font-size: 24px; color: #000; font-weight: 900;
            box-shadow: 0 0 30px var(--glow); transition: 0.1s;
        }
        #mark-speech {
            background: var(--glass); padding: 10px 15px; border-radius: 15px;
            border: 1px solid var(--gold); font-size: 11px; margin-bottom: 8px;
            opacity: 0; transform: translateY(10px); transition: 0.3s;
        }
        #mark-speech.show { opacity: 1; transform: translateY(0); }

        /* --- THE HALLWAY ENGINE --- */
        #hallway {
            position: relative; width: 100vw; height: 100vh;
            perspective: 1200px; display: none;
            background: radial-gradient(circle at center, #111 0%, #000 100%);
        }
        .door-container {
            position: absolute; top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            display: flex; gap: 40px; transition: 0.8s cubic-bezier(0.19, 1, 0.22, 1);
        }
        .door {
            width: 220px; height: 350px; background: var(--glass);
            border: 2px solid var(--gold); border-radius: 15px;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            transition: 0.5s; position: relative; overflow: hidden;
            box-shadow: 0 0 20px rgba(0,0,0,0.5);
        }
        .door:hover {
            transform: scale(1.1) translateZ(50px);
            box-shadow: 0 0 50px var(--glow);
            border-color: #fff;
        }
        .door h2 { font-size: 14px; letter-spacing: 5px; color: var(--gold); margin-top: 20px; }
        .door .icon { font-size: 50px; }
        .door::before {
            content: ''; position: absolute; inset: 0;
            background: linear-gradient(45deg, transparent, rgba(255,204,51,0.1), transparent);
            transform: translateX(-100%); transition: 0.5s;
        }
        .door:hover::before { transform: translateX(100%); }

        /* --- ROOM OVERLAYS --- */
        .room {
            position: fixed; inset: 0; z-index: 5000;
            background: var(--dark); display: none;
            flex-direction: column; animation: roomOpen 0.6s forwards;
        }
        @keyframes roomOpen { from { clip-path: circle(0% at 50% 50%); } to { clip-path: circle(150% at 50% 50%); } }
        
        .room-header {
            padding: 30px; display: flex; justify-content: space-between;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        .close-room { 
            background: var(--gold); color: #000; padding: 10px 25px; 
            border-radius: 30px; font-weight: 900; cursor: none;
        }

        /* --- DRAWING ROOM --- */
        #canvas-paint { background: #080808; cursor: none; flex: 1; }

        /* --- AUTH --- */
        #auth {
            position: fixed; inset: 0; z-index: 20000;
            background: #000; display: flex; align-items: center; justify-content: center;
        }
        .auth-box { text-align: center; border: 1px solid var(--gold); padding: 50px; border-radius: 40px; background: var(--glass); }
        .auth-box input { 
            display: block; width: 300px; padding: 15px; margin: 20px 0;
            background: #000; border: 1px solid var(--gold); color: #fff;
            text-align: center; border-radius: 10px;
        }
        .auth-box button { 
            width: 100%; padding: 15px; background: var(--gold); 
            border: none; font-weight: 900; border-radius: 10px;
        }

    </style>
</head>
<body>

    <!-- MARK COMPANION -->
    <div id="mark-container">
        <div id="mark-speech">SYSTEMS ONLINE.</div>
        <div id="mark-face">:)</div>
    </div>

    <!-- AUTHENTICATION -->
    <div id="auth">
        <div class="auth-box">
            <h1 style="letter-spacing: 15px; color: var(--gold);">MASON</h1>
            <input type="password" id="pass" placeholder="PROTOCOL KEY">
            <button onclick="enterMansion()">INITIALIZE</button>
        </div>
    </div>

    <!-- THE HALLWAY -->
    <div id="hallway">
        <div class="door-container">
            <div class="door" onclick="openRoom('room-draw')">
                <div class="icon">üé®</div>
                <h2>CANVAS</h2>
            </div>
            <div class="door" onclick="openRoom('room-void')">
                <div class="icon">üåÄ</div>
                <h2>THE VOID</h2>
            </div>
            <div class="door" onclick="openRoom('room-settings')">
                <div class="icon">‚öôÔ∏è</div>
                <h2>VITALS</h2>
            </div>
            <div class="door" onclick="location.reload()">
                <div class="icon">üîí</div>
                <h2>EXIT</h2>
            </div>
        </div>
    </div>

    <!-- ROOMS -->
    <div id="room-draw" class="room">
        <div class="room-header">
            <h1 style="color:var(--gold)">NEON ATELIER</h1>
            <div class="close-room" onclick="closeRoom()">LEAVE ROOM</div>
        </div>
        <canvas id="canvas-paint"></canvas>
        <div style="padding:20px; background: #111; display:flex; gap:20px;">
            <button onclick="clearCanvas()" style="padding:10px; border-radius:10px; background:var(--accent); border:none; color:#fff;">WIPE CANVAS</button>
            <p style="opacity:0.5; font-size:12px;">Draw with your mouse. Mark is watching.</p>
        </div>
    </div>

    <div id="room-void" class="room" style="justify-content:center; align-items:center;">
        <div class="room-header" style="position:absolute; top:0; width:100%;">
            <h1 style="color:var(--gold)">PHYSICS VOID</h1>
            <div class="close-room" onclick="closeRoom()">EXIT VOID</div>
        </div>
        <div id="void-msg" style="font-size:30px; text-align:center;">
            The Void is currently <span style="color:var(--gold)">UNSTABLE</span>.<br>
            <span style="font-size:14px; opacity:0.5;">Mark's gravity is increased here.</span>
        </div>
    </div>

    <div id="room-settings" class="room">
        <div class="room-header">
            <h1 style="color:var(--gold)">MANSION VITALS</h1>
            <div class="close-room" onclick="closeRoom()">SAVE</div>
        </div>
        <div style="padding:50px;">
            <h3>MARK PERSONALITY</h3>
            <select style="width:100%; padding:15px; margin:20px 0; background:#000; color:#fff; border:1px solid var(--gold);">
                <option>Friendly (Default)</option>
                <option>Sarcastic</option>
                <option>Silent Observer</option>
                <option>Chaos Mode</option>
            </select>
            <h3>CORE GLOW STRENGTH</h3>
            <input type="range" style="width:100%; margin:20px 0;">
        </div>
    </div>

    <script>
        /* --- PHYSICS ENGINE: MARK --- */
        let mX = 0, mY = 0, curX = 0, curY = 0;
        const mark = document.getElementById('mark-container');
        const speech = document.getElementById('mark-speech');
        
        document.addEventListener('mousemove', (e) => { mX = e.clientX; mY = e.clientY; });

        function updateMark() {
            let targetX = mX - 20;
            let targetY = mY - 20;
            // Inertia calculation
            curX += (targetX - curX) * 0.12;
            curY += (targetY - curY) * 0.12;
            mark.style.transform = `translate(${curX}px, ${curY}px)`;
            requestAnimationFrame(updateMark);
        }
        updateMark();

        function markTalk(text) {
            speech.innerText = text;
            speech.classList.add('show');
            setTimeout(() => speech.classList.remove('show'), 3000);
        }

        /* --- AUTH LOGIC --- */
        function enterMansion() {
            const pass = document.getElementById('pass').value;
            if(pass === 'honey' || pass === 'masononly69') {
                document.getElementById('auth').style.display = 'none';
                document.getElementById('hallway').style.display = 'block';
                markTalk(pass === 'masononly69' ? "Welcome home, Architect." : "Visitor access granted.");
            } else {
                markTalk("INCORRECT KEY.");
            }
        }

        /* --- ROOM NAVIGATION --- */
        function openRoom(id) {
            document.getElementById(id).style.display = 'flex';
            if(id === 'room-draw') initCanvas();
            markTalk("Entering room...");
        }
        function closeRoom() {
            document.querySelectorAll('.room').forEach(r => r.style.display = 'none');
            markTalk("Back in the hallway.");
        }

        /* --- DRAWING SYSTEM --- */
        const canvas = document.getElementById('canvas-paint');
        const ctx = canvas.getContext('2d');
        let drawing = false;

        function initCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight - 100;
            ctx.strokeStyle = '#ffcc33';
            ctx.lineWidth = 3;
            ctx.lineJoin = 'round';
            ctx.lineCap = 'round';
            ctx.shadowBlur = 10;
            ctx.shadowColor = '#ffcc33';
        }

        canvas.addEventListener('mousedown', () => drawing = true);
        canvas.addEventListener('mouseup', () => {
            drawing = false;
            ctx.beginPath();
            if(Math.random() > 0.8) markTalk("That's a nice stroke.");
        });
        canvas.addEventListener('mousemove', (e) => {
            if(!drawing) return;
            ctx.lineTo(e.clientX, e.clientY - 90);
            ctx.stroke();
            ctx.beginPath();
            ctx.moveTo(e.clientX, e.clientY - 90);
        });

        function clearCanvas() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            markTalk("Canvas purged.");
        }

        /* --- MANSION RESPONSES --- */
        const mansionQuotes = [
            "Every door leads to a different reality.",
            "Mason designed the hallway to be infinite.",
            "Be careful in the Void Room.",
            "The Neon Atelier is my favorite.",
            "I'm keeping the air quality at 100%.",
            "Are you ready for the fun stuff?",
            "V20 architecture is perfectly stable."
        ];

        setInterval(() => {
            if(Math.random() > 0.95 && document.getElementById('auth').style.display === 'none') {
                markTalk(mansionQuotes[Math.floor(Math.random() * mansionQuotes.length)]);
            }
        }, 5000);

    </script>
</body>
</html>
